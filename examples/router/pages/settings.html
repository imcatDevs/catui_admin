<div class="cui-fluid">
  <!-- 페이지 헤더 -->
  <div class="cui-page-header cui-mb-15">
    <div class="cui-page-title-wrap">
      <h2 class="cui-page-title">설정</h2>
    </div>
    <div class="cui-breadcrumb">
      <a href="javascript:;">홈</a>
      <a href="javascript:;">페이지</a>
      <span>설정</span>
    </div>
  </div>

  <div class="cui-flex cui-gap-15" style="flex-wrap:wrap;">
    <!-- 사이드 메뉴 -->
    <div style="width:220px;flex-shrink:0;">
      <div class="cui-card">
        <div class="cui-card-body cui-p-0">
          <div class="settings-menu">
            <a href="javascript:;" class="active" data-tab="general"><i class="cui-icon">settings</i> 일반</a>
            <a href="javascript:;" data-tab="security"><i class="cui-icon">security</i> 보안</a>
            <a href="javascript:;" data-tab="notification"><i class="cui-icon">notifications</i> 알림</a>
            <a href="javascript:;" data-tab="privacy"><i class="cui-icon">lock</i> 개인정보</a>
            <a href="javascript:;" data-tab="appearance"><i class="cui-icon">palette</i> 외관</a>
            <a href="javascript:;" data-tab="billing"><i class="cui-icon">credit_card</i> 결제</a>
          </div>
        </div>
      </div>
    </div>

    <!-- 설정 내용 -->
    <div style="flex:1;min-width:0;">
      <!-- 일반 설정 -->
      <div class="settings-content" id="tab-general">
        <div class="cui-card cui-mb-15">
          <div class="cui-card-header">프로필 정보</div>
          <div class="cui-card-body">
            <div class="cui-flex cui-gap-20 cui-mb-20">
              <div class="settings-avatar">
                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='50' fill='%231677ff'/%3E%3Cpath d='M50 55c11 0 20-9 20-20s-9-20-20-20-20 9-20 20 9 20 20 20zm0 10c-13 0-40 7-40 20v10h80v-10c0-13-27-20-40-20z' fill='%23fff'/%3E%3C/svg%3E" alt="avatar">
                <button class="cui-btn cui-btn-sm">변경</button>
              </div>
              <div style="flex:1;">
                <div class="cui-form-group cui-mb-15">
                  <label class="cui-form-label">이름</label>
                  <input type="text" class="cui-input" value="홍길동">
                </div>
                <div class="cui-form-group">
                  <label class="cui-form-label">이메일</label>
                  <input type="email" class="cui-input" value="hong@example.com">
                </div>
              </div>
            </div>
            <div class="cui-form-group cui-mb-15">
              <label class="cui-form-label">소개</label>
              <textarea class="cui-textarea" rows="3">안녕하세요! 프론트엔드 개발자입니다.</textarea>
            </div>
            <div class="cui-flex cui-gap-15">
              <div class="cui-form-group" style="flex:1;">
                <label class="cui-form-label">전화번호</label>
                <input type="tel" class="cui-input" value="010-1234-5678">
              </div>
              <div class="cui-form-group" style="flex:1;">
                <label class="cui-form-label">위치</label>
                <input type="text" class="cui-input" value="서울, 대한민국">
              </div>
            </div>
          </div>
        </div>
        <div class="cui-flex cui-flex-end cui-gap-10">
          <button class="cui-btn">취소</button>
          <button class="cui-btn cui-btn-primary" id="btnSaveGeneral">저장</button>
        </div>
      </div>

      <!-- 보안 설정 -->
      <div class="settings-content" id="tab-security" style="display:none;">
        <div class="cui-card cui-mb-15">
          <div class="cui-card-header">비밀번호 변경</div>
          <div class="cui-card-body">
            <div class="cui-form-group cui-mb-15">
              <label class="cui-form-label">현재 비밀번호</label>
              <input type="password" class="cui-input" placeholder="현재 비밀번호">
            </div>
            <div class="cui-form-group cui-mb-15">
              <label class="cui-form-label">새 비밀번호</label>
              <input type="password" class="cui-input" placeholder="새 비밀번호">
            </div>
            <div class="cui-form-group">
              <label class="cui-form-label">새 비밀번호 확인</label>
              <input type="password" class="cui-input" placeholder="새 비밀번호 확인">
            </div>
          </div>
        </div>
        <div class="cui-card cui-mb-15">
          <div class="cui-card-header">2단계 인증</div>
          <div class="cui-card-body">
            <div class="cui-flex cui-flex-between cui-flex-middle">
              <div>
                <h4 class="cui-mb-5">인증 앱</h4>
                <p class="cui-text-secondary cui-text-sm">Google Authenticator 또는 Authy를 사용하세요</p>
              </div>
              <div class="cui-switch" id="switch2FA"></div>
            </div>
          </div>
        </div>
        <div class="cui-flex cui-flex-end cui-gap-10">
          <button class="cui-btn">취소</button>
          <button class="cui-btn cui-btn-primary" id="btnSaveSecurity">저장</button>
        </div>
      </div>

      <!-- 알림 설정 -->
      <div class="settings-content" id="tab-notification" style="display:none;">
        <div class="cui-card">
          <div class="cui-card-header">알림 설정</div>
          <div class="cui-card-body cui-p-0">
            <div class="settings-list">
              <div class="settings-item">
                <div>
                  <h4>이메일 알림</h4>
                  <p>새로운 메시지, 업데이트 알림을 이메일로 받습니다</p>
                </div>
                <div class="cui-switch" data-checked="true"></div>
              </div>
              <div class="settings-item">
                <div>
                  <h4>푸시 알림</h4>
                  <p>브라우저 푸시 알림을 받습니다</p>
                </div>
                <div class="cui-switch"></div>
              </div>
              <div class="settings-item">
                <div>
                  <h4>SMS 알림</h4>
                  <p>중요한 알림을 SMS로 받습니다</p>
                </div>
                <div class="cui-switch"></div>
              </div>
              <div class="settings-item">
                <div>
                  <h4>마케팅 이메일</h4>
                  <p>프로모션 및 뉴스레터를 받습니다</p>
                </div>
                <div class="cui-switch" data-checked="true"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- 개인정보 설정 -->
      <div class="settings-content" id="tab-privacy" style="display:none;">
        <div class="cui-card">
          <div class="cui-card-header">개인정보 설정</div>
          <div class="cui-card-body cui-p-0">
            <div class="settings-list">
              <div class="settings-item">
                <div>
                  <h4>프로필 공개</h4>
                  <p>다른 사용자가 프로필을 볼 수 있습니다</p>
                </div>
                <div class="cui-switch" data-checked="true"></div>
              </div>
              <div class="settings-item">
                <div>
                  <h4>활동 상태 표시</h4>
                  <p>온라인/오프라인 상태를 표시합니다</p>
                </div>
                <div class="cui-switch" data-checked="true"></div>
              </div>
              <div class="settings-item">
                <div>
                  <h4>검색 노출</h4>
                  <p>검색 결과에 프로필이 표시됩니다</p>
                </div>
                <div class="cui-switch"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- 외관 설정 -->
      <div class="settings-content" id="tab-appearance" style="display:none;">
        <div class="cui-card cui-mb-15">
          <div class="cui-card-header">테마</div>
          <div class="cui-card-body">
            <div class="theme-options">
              <div class="theme-option active" data-theme="light">
                <div class="theme-preview theme-light"></div>
                <span>라이트</span>
              </div>
              <div class="theme-option" data-theme="dark">
                <div class="theme-preview theme-dark"></div>
                <span>다크</span>
              </div>
              <div class="theme-option" data-theme="auto">
                <div class="theme-preview theme-auto"></div>
                <span>시스템</span>
              </div>
            </div>
          </div>
        </div>
        <div class="cui-card">
          <div class="cui-card-header">Primary 색상</div>
          <div class="cui-card-body">
            <div class="color-options">
              <div class="color-option active" style="background:#1677ff;"></div>
              <div class="color-option" style="background:#52c41a;"></div>
              <div class="color-option" style="background:#722ed1;"></div>
              <div class="color-option" style="background:#eb2f96;"></div>
              <div class="color-option" style="background:#fa8c16;"></div>
              <div class="color-option" style="background:#13c2c2;"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- 결제 설정 -->
      <div class="settings-content" id="tab-billing" style="display:none;">
        <div class="cui-card cui-mb-15">
          <div class="cui-card-header">현재 플랜</div>
          <div class="cui-card-body">
            <div class="cui-flex cui-flex-between cui-flex-middle">
              <div>
                <h3 class="cui-mb-5">Pro 플랜</h3>
                <p class="cui-text-secondary">월 ₩29,000 · 다음 결제일: 2024-02-15</p>
              </div>
              <button class="cui-btn">플랜 변경</button>
            </div>
          </div>
        </div>
        <div class="cui-card cui-mb-15">
          <div class="cui-card-header">결제 수단</div>
          <div class="cui-card-body">
            <div class="payment-card">
              <div class="card-icon"><i class="cui-icon">credit_card</i></div>
              <div class="card-info">
                <div class="card-number">•••• •••• •••• 4242</div>
                <div class="card-expiry">만료: 12/25</div>
              </div>
              <button class="cui-btn cui-btn-sm">수정</button>
            </div>
          </div>
        </div>
        <div class="cui-card">
          <div class="cui-card-header">결제 내역</div>
          <div class="cui-card-body cui-p-0">
            <table class="cui-table">
              <thead>
                <tr><th>날짜</th><th>설명</th><th>금액</th><th>상태</th></tr>
              </thead>
              <tbody>
                <tr><td>2024-01-15</td><td>Pro 플랜 - 월간</td><td>₩29,000</td><td><span class="cui-badge cui-badge-success">완료</span></td></tr>
                <tr><td>2023-12-15</td><td>Pro 플랜 - 월간</td><td>₩29,000</td><td><span class="cui-badge cui-badge-success">완료</span></td></tr>
                <tr><td>2023-11-15</td><td>Pro 플랜 - 월간</td><td>₩29,000</td><td><span class="cui-badge cui-badge-success">완료</span></td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
.settings-menu a {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 15px;
  color: var(--cui-text);
  text-decoration: none;
  border-left: 3px solid transparent;
  transition: all 0.2s;
}

.settings-menu a:hover { background: var(--cui-fill); }
.settings-menu a.active { background: var(--cui-primary-bg, rgba(22,119,255,0.1)); border-left-color: var(--cui-primary); color: var(--cui-primary); }
.settings-menu .cui-icon { font-size: 20px; }

.settings-avatar { text-align: center; }
.settings-avatar img { width: 100px; height: 100px; border-radius: 50%; margin-bottom: 10px; }

.settings-list { }
.settings-item { display: flex; justify-content: space-between; align-items: center; padding: 15px; border-bottom: 1px solid var(--cui-border); }
.settings-item:last-child { border-bottom: none; }
.settings-item h4 { margin: 0 0 5px; font-size: 14px; }
.settings-item p { margin: 0; font-size: 13px; color: var(--cui-text-secondary); }

.theme-options { display: flex; gap: 15px; }
.theme-option { cursor: pointer; text-align: center; }
.theme-preview { width: 80px; height: 60px; border-radius: 6px; margin-bottom: 8px; border: 2px solid var(--cui-border); }
.theme-option.active .theme-preview { border-color: var(--cui-primary); }
.theme-light { background: linear-gradient(180deg, #fff 50%, #f5f5f5 50%); }
.theme-dark { background: linear-gradient(180deg, #1f1f1f 50%, #141414 50%); }
.theme-auto { background: linear-gradient(90deg, #fff 50%, #1f1f1f 50%); }

.color-options { display: flex; gap: 10px; }
.color-option { width: 36px; height: 36px; border-radius: 50%; cursor: pointer; border: 3px solid transparent; transition: transform 0.2s; }
.color-option:hover { transform: scale(1.1); }
.color-option.active { border-color: var(--cui-text); }

.payment-card { display: flex; align-items: center; gap: 15px; padding: 15px; background: var(--cui-fill); border-radius: 8px; }
.card-icon { width: 50px; height: 35px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 4px; display: flex; align-items: center; justify-content: center; }
.card-icon .cui-icon { color: #fff; }
.card-info { flex: 1; }
.card-number { font-weight: 600; }
.card-expiry { font-size: 12px; color: var(--cui-text-secondary); }

.cui-switch { width: 44px; height: 24px; background: var(--cui-border); border-radius: 12px; cursor: pointer; position: relative; transition: background 0.2s; }
.cui-switch::after { content: ''; position: absolute; width: 20px; height: 20px; background: #fff; border-radius: 50%; top: 2px; left: 2px; transition: left 0.2s; box-shadow: 0 1px 3px rgba(0,0,0,0.2); }
.cui-switch.active { background: var(--cui-primary); }
.cui-switch.active::after { left: 22px; }
</style>

<script>
Catui.use(['popup'], function(){
  var bindEvent = window.router ? router.bindEvent.bind(router) : function(el, type, fn){
    document.querySelector(el).addEventListener(type, fn);
  };

  // 메뉴 탭 전환
  document.querySelectorAll('.settings-menu a').forEach(function(menu){
    menu.addEventListener('click', function(){
      var tabId = this.getAttribute('data-tab');
      
      document.querySelectorAll('.settings-menu a').forEach(function(m){ m.classList.remove('active'); });
      this.classList.add('active');
      
      document.querySelectorAll('.settings-content').forEach(function(c){ c.style.display = 'none'; });
      document.getElementById('tab-' + tabId).style.display = 'block';
    });
  });

  // 스위치 토글
  document.querySelectorAll('.cui-switch').forEach(function(sw){
    if(sw.getAttribute('data-checked') === 'true') sw.classList.add('active');
    sw.addEventListener('click', function(){
      this.classList.toggle('active');
    });
  });

  // 테마 선택
  document.querySelectorAll('.theme-option').forEach(function(opt){
    opt.addEventListener('click', function(){
      document.querySelectorAll('.theme-option').forEach(function(o){ o.classList.remove('active'); });
      this.classList.add('active');
      popup.msg(this.getAttribute('data-theme') + ' 테마 선택');
    });
  });

  // 색상 선택
  document.querySelectorAll('.color-option').forEach(function(opt){
    opt.addEventListener('click', function(){
      document.querySelectorAll('.color-option').forEach(function(o){ o.classList.remove('active'); });
      this.classList.add('active');
      popup.msg('색상 변경됨');
    });
  });

  // 저장 버튼
  bindEvent('#btnSaveGeneral', 'click', function(){
    popup.msg('설정이 저장되었습니다', { icon: 1 });
  });

  bindEvent('#btnSaveSecurity', 'click', function(){
    popup.msg('보안 설정이 저장되었습니다', { icon: 1 });
  });
});
</script>
