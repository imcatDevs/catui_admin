<div class="cui-fluid">
  <!-- 페이지 헤더 -->
  <div class="cui-page-header cui-mb-15">
    <div class="cui-page-title-wrap">
      <h2 class="cui-page-title">리치 에디터 (Editor)</h2>
      <button type="button" class="cui-page-refresh" onclick="router.refresh()"><i class="cui-icon">refresh</i></button>
    </div>
    <div class="cui-breadcrumb">
      <a href="javascript:;">홈</a>
      <a href="javascript:;">컴포넌트</a>
      <span>Editor</span>
    </div>
  </div>

  <!-- 기본 에디터 -->
  <div class="cui-card cui-mb-15">
    <div class="cui-card-header cui-flex cui-flex-between cui-flex-middle">
      <span>기본 에디터</span>
      <code class="cui-text-secondary">editor.render()</code>
    </div>
    <div class="cui-card-body">
      <textarea id="editor1" style="display:none;"></textarea>
    </div>
  </div>

  <!-- 커스텀 툴바 -->
  <div class="cui-card cui-mb-15">
    <div class="cui-card-header cui-flex cui-flex-between cui-flex-middle">
      <span>커스텀 툴바</span>
      <code class="cui-text-secondary">tool: ['bold', 'italic', ...]</code>
    </div>
    <div class="cui-card-body">
      <p class="cui-text-secondary cui-mb-10">간단한 툴바 (텍스트 서식만)</p>
      <textarea id="editor2" style="display:none;"></textarea>
    </div>
  </div>

  <!-- 높이 설정 -->
  <div class="cui-card cui-mb-15">
    <div class="cui-card-header cui-flex cui-flex-between cui-flex-middle">
      <span>높이 설정</span>
      <code class="cui-text-secondary">height: 200</code>
    </div>
    <div class="cui-card-body">
      <textarea id="editor3" style="display:none;"></textarea>
    </div>
  </div>

  <!-- 초기 내용 설정 -->
  <div class="cui-card cui-mb-15">
    <div class="cui-card-header cui-flex cui-flex-between cui-flex-middle">
      <span>초기 내용 설정</span>
      <code class="cui-text-secondary">textarea에 초기값 설정</code>
    </div>
    <div class="cui-card-body">
      <textarea id="editor4" style="display:none;"><h3>환영합니다!</h3><p>이것은 <strong>초기 내용</strong>입니다.</p><ul><li>항목 1</li><li>항목 2</li></ul></textarea>
    </div>
  </div>

  <!-- 인스턴스 제어 -->
  <div class="cui-card cui-mb-15">
    <div class="cui-card-header cui-flex cui-flex-between cui-flex-middle">
      <span>인스턴스 제어</span>
      <code class="cui-text-secondary">getContent(), setContent(), getText()</code>
    </div>
    <div class="cui-card-body">
      <textarea id="editor5" style="display:none;"></textarea>
      <div class="cui-mt-15">
        <div class="cui-flex cui-gap-10 cui-mb-10">
          <button id="btnGetHtml" type="button" class="cui-btn cui-btn-sm cui-btn-primary">HTML 가져오기</button>
          <button id="btnGetText" type="button" class="cui-btn cui-btn-sm">텍스트 가져오기</button>
          <button id="btnSetContent" type="button" class="cui-btn cui-btn-sm">내용 설정</button>
          <button id="btnFocus" type="button" class="cui-btn cui-btn-sm">포커스</button>
        </div>
        <div class="cui-card cui-card-bordered">
          <div class="cui-card-header cui-text-xs">결과</div>
          <div class="cui-card-body">
            <pre id="editorResult" style="margin:0; white-space:pre-wrap; word-break:break-all; max-height:150px; overflow:auto;">(버튼을 클릭하세요)</pre>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- 이미지 업로드 설정 -->
  <div class="cui-card cui-mb-15">
    <div class="cui-card-header cui-flex cui-flex-between cui-flex-middle">
      <span>이미지 업로드 설정</span>
      <code class="cui-text-secondary">uploadUrl, uploadDone</code>
    </div>
    <div class="cui-card-body">
      <div class="cui-alert cui-alert-warning cui-mb-15">
        <i class="cui-icon">info</i>
        <span>이미지 업로드를 사용하려면 <code>uploadUrl</code>을 설정해야 합니다. 설정하지 않으면 URL 직접 입력만 가능합니다.</span>
      </div>
      <textarea id="editor6" style="display:none;"></textarea>
    </div>
  </div>

  <!-- API 테이블 -->
  <div class="cui-card">
    <div class="cui-card-header">Editor API</div>
    <div class="cui-card-body">
      <table class="cui-table cui-table-border">
        <thead>
          <tr><th style="width:35%">옵션/메서드</th><th>설명</th></tr>
        </thead>
        <tbody>
          <tr><td><code>editor.render(options)</code></td><td>에디터 렌더링</td></tr>
          <tr><td><code>editor.getInst(id)</code></td><td>인스턴스 가져오기</td></tr>
          <tr><td><code>inst.getContent()</code></td><td>HTML 내용 가져오기</td></tr>
          <tr><td><code>inst.setContent(html)</code></td><td>HTML 내용 설정</td></tr>
          <tr><td><code>inst.getText()</code></td><td>텍스트만 가져오기</td></tr>
          <tr><td><code>inst.focus()</code></td><td>에디터에 포커스</td></tr>
          <tr><td><code>inst.reload(options)</code></td><td>에디터 다시 렌더링</td></tr>
        </tbody>
      </table>
      
      <h4 class="cui-mt-20 cui-mb-10">옵션</h4>
      <table class="cui-table cui-table-border">
        <thead>
          <tr><th style="width:25%">옵션</th><th style="width:20%">기본값</th><th>설명</th></tr>
        </thead>
        <tbody>
          <tr><td><code>elem</code></td><td>-</td><td>대상 요소 (textarea)</td></tr>
          <tr><td><code>id</code></td><td>자동생성</td><td>고유 ID</td></tr>
          <tr><td><code>height</code></td><td>300</td><td>에디터 높이 (px)</td></tr>
          <tr><td><code>placeholder</code></td><td>'내용을 입력하세요...'</td><td>플레이스홀더</td></tr>
          <tr><td><code>tool</code></td><td>[기본 툴바]</td><td>툴바 버튼 배열</td></tr>
          <tr><td><code>uploadUrl</code></td><td>''</td><td>이미지 업로드 URL</td></tr>
          <tr><td><code>uploadField</code></td><td>'file'</td><td>파일 필드명</td></tr>
          <tr><td><code>uploadExts</code></td><td>'jpg|jpeg|png|gif|bmp|webp'</td><td>허용 확장자</td></tr>
          <tr><td><code>uploadSize</code></td><td>'10MB'</td><td>최대 파일 크기</td></tr>
          <tr><td><code>uploadDone</code></td><td>null</td><td>업로드 완료 콜백 (res) => url</td></tr>
        </tbody>
      </table>

      <h4 class="cui-mt-20 cui-mb-10">툴바 버튼</h4>
      <table class="cui-table cui-table-border">
        <thead>
          <tr><th style="width:20%">이름</th><th style="width:30%">아이콘</th><th>설명</th></tr>
        </thead>
        <tbody>
          <tr><td><code>bold</code></td><td><i class="cui-icon">format_bold</i> format_bold</td><td>굵게</td></tr>
          <tr><td><code>italic</code></td><td><i class="cui-icon">format_italic</i> format_italic</td><td>기울임</td></tr>
          <tr><td><code>underline</code></td><td><i class="cui-icon">format_underlined</i> format_underlined</td><td>밑줄</td></tr>
          <tr><td><code>strikethrough</code></td><td><i class="cui-icon">strikethrough_s</i> strikethrough_s</td><td>취소선</td></tr>
          <tr><td><code>|</code></td><td>-</td><td>구분선</td></tr>
          <tr><td><code>left</code></td><td><i class="cui-icon">format_align_left</i> format_align_left</td><td>왼쪽 정렬</td></tr>
          <tr><td><code>center</code></td><td><i class="cui-icon">format_align_center</i> format_align_center</td><td>가운데 정렬</td></tr>
          <tr><td><code>right</code></td><td><i class="cui-icon">format_align_right</i> format_align_right</td><td>오른쪽 정렬</td></tr>
          <tr><td><code>ul</code></td><td><i class="cui-icon">format_list_bulleted</i> format_list_bulleted</td><td>글머리 기호</td></tr>
          <tr><td><code>ol</code></td><td><i class="cui-icon">format_list_numbered</i> format_list_numbered</td><td>번호 매기기</td></tr>
          <tr><td><code>link</code></td><td><i class="cui-icon">link</i> link</td><td>링크 삽입</td></tr>
          <tr><td><code>unlink</code></td><td><i class="cui-icon">link_off</i> link_off</td><td>링크 제거</td></tr>
          <tr><td><code>image</code></td><td><i class="cui-icon">image</i> image</td><td>이미지 URL</td></tr>
          <tr><td><code>upload</code></td><td><i class="cui-icon">upload</i> upload</td><td>이미지 업로드</td></tr>
          <tr><td><code>hr</code></td><td><i class="cui-icon">horizontal_rule</i> horizontal_rule</td><td>구분선</td></tr>
          <tr><td><code>undo</code></td><td><i class="cui-icon">undo</i> undo</td><td>실행 취소</td></tr>
          <tr><td><code>redo</code></td><td><i class="cui-icon">redo</i> redo</td><td>다시 실행</td></tr>
          <tr><td><code>code</code></td><td><i class="cui-icon">code</i> code</td><td>HTML 보기</td></tr>
          <tr><td><code>fullscreen</code></td><td><i class="cui-icon">fullscreen</i> fullscreen</td><td>전체화면</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<script>
Catui.use(['editor', 'popup'], function(){
  // 이벤트 바인딩 래퍼 (메모리 누수 방지)
  var bindEvent = window.router ? router.bindEvent.bind(router) : function(el, type, fn){
    document.querySelector(el).addEventListener(type, fn);
  };

  // 기본 에디터
  editor.render({
    elem: '#editor1',
    placeholder: '여기에 내용을 입력하세요...'
  });

  // 커스텀 툴바 (간단)
  editor.render({
    elem: '#editor2',
    tool: ['bold', 'italic', 'underline', 'strikethrough', '|', 'left', 'center', 'right'],
    placeholder: '간단한 텍스트 서식만 지원합니다.'
  });

  // 높이 설정
  editor.render({
    elem: '#editor3',
    height: 200,
    placeholder: '높이가 200px로 설정된 에디터입니다.'
  });

  // 초기 내용
  editor.render({
    elem: '#editor4'
  });

  // 인스턴스 제어
  var editorInst = editor.render({
    elem: '#editor5',
    id: 'controlEditor',
    placeholder: '인스턴스 제어 테스트용 에디터입니다.'
  });

  bindEvent('#btnGetHtml', 'click', function(){
    var html = editorInst.getContent();
    document.getElementById('editorResult').textContent = html || '(내용 없음)';
  });

  bindEvent('#btnGetText', 'click', function(){
    var text = editorInst.getText();
    document.getElementById('editorResult').textContent = text || '(내용 없음)';
  });

  bindEvent('#btnSetContent', 'click', function(){
    editorInst.setContent('<h2>새로운 내용</h2><p>setContent()로 설정된 내용입니다.</p><p style="color:#1677ff;">파란색 텍스트</p>');
    document.getElementById('editorResult').textContent = '내용이 설정되었습니다.';
  });

  bindEvent('#btnFocus', 'click', function(){
    editorInst.focus();
    document.getElementById('editorResult').textContent = '에디터에 포커스되었습니다.';
  });

  // 이미지 업로드 설정 예시
  editor.render({
    elem: '#editor6',
    tool: ['bold', 'italic', '|', 'image', 'upload', '|', 'code', 'fullscreen'],
    placeholder: '이미지 업로드 버튼을 클릭해보세요.',
    // 업로드 URL이 없으면 URL 직접 입력만 가능
    // uploadUrl: '/api/upload',
    // uploadDone: function(res){ return res.data.url; }
  });
});
</script>
</div>
