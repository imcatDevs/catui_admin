<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>기타 컴포넌트 테스트 - Catui</title>
  <link rel="stylesheet" href="../catui.css">
  <style>
    .test-section { padding: 20px; margin-bottom: 20px; background: #fff; border-radius: 8px; }
    .test-section h3 { margin-top: 0; border-bottom: 1px solid #eee; padding-bottom: 10px; }
    .demo-box { display: flex; gap: 30px; flex-wrap: wrap; align-items: flex-start; }
    .demo-item { min-width: 200px; }
    .demo-item label { display: block; margin-bottom: 10px; font-weight: 500; }
  </style>
</head>
<body style="padding: 20px; background: #f5f5f5;">
  <h2>기타 컴포넌트 테스트</h2>

  <!-- Rate 별점 -->
  <div id="rate" class="test-section">
    <h3>Rate 별점</h3>
    <div class="demo-box">
      <div class="demo-item">
        <label>기본 별점</label>
        <div id="rate1"></div>
      </div>
      <div class="demo-item">
        <label>반별 허용</label>
        <div id="rate2"></div>
      </div>
      <div class="demo-item">
        <label>텍스트 표시</label>
        <div id="rate3"></div>
      </div>
      <div class="demo-item">
        <label>읽기 전용</label>
        <div id="rate4"></div>
      </div>
    </div>
  </div>

  <!-- Slider 슬라이더 -->
  <div id="slider" class="test-section">
    <h3>Slider 슬라이더</h3>
    <div class="demo-box">
      <div class="demo-item" style="min-width: 300px;">
        <label>기본 슬라이더</label>
        <div id="slider1"></div>
      </div>
      <div class="demo-item" style="min-width: 300px;">
        <label>범위 슬라이더</label>
        <div id="slider2"></div>
      </div>
      <div class="demo-item" style="min-width: 300px;">
        <label>입력 필드 연동</label>
        <div id="slider3"></div>
      </div>
      <div class="demo-item" style="height: 200px;">
        <label>수직 슬라이더</label>
        <div id="slider4"></div>
      </div>
    </div>
  </div>

  <!-- Colorpicker 색상 선택기 -->
  <div id="colorpicker" class="test-section">
    <h3>Colorpicker 색상 선택기</h3>
    <div class="demo-box">
      <div class="demo-item">
        <label>기본</label>
        <div id="colorpicker1"></div>
      </div>
      <div class="demo-item">
        <label>프리셋 색상</label>
        <div id="colorpicker2"></div>
      </div>
    </div>
    <div style="margin-top: 15px;">
      선택된 색상: <span id="colorResult">#1677ff</span>
    </div>
  </div>

  <!-- Carousel 캐러셀 -->
  <div id="carousel" class="test-section">
    <h3>Carousel 캐러셀</h3>
    <div class="demo-box">
      <div id="carousel1" style="width: 500px;">
        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); height: 250px; display: flex; align-items: center; justify-content: center; color: #fff; font-size: 24px;">슬라이드 1</div>
        <div style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); height: 250px; display: flex; align-items: center; justify-content: center; color: #fff; font-size: 24px;">슬라이드 2</div>
        <div style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); height: 250px; display: flex; align-items: center; justify-content: center; color: #fff; font-size: 24px;">슬라이드 3</div>
      </div>
    </div>
  </div>

  <!-- Transfer 이전 선택 -->
  <div id="transfer" class="test-section">
    <h3>Transfer 이전 선택</h3>
    <div id="transfer1"></div>
    <div style="margin-top: 15px;">
      <button class="cui-btn cui-btn-sm" onclick="getTransferData()">선택된 데이터 확인</button>
    </div>
  </div>

  <!-- Util 유틸리티 -->
  <div id="util" class="test-section">
    <h3>Util 유틸리티</h3>
    <div class="demo-box">
      <div class="demo-item">
        <label>시간 경과 표시</label>
        <div id="timeAgo"></div>
      </div>
      <div class="demo-item">
        <label>숫자 포맷</label>
        <div id="numberFormat"></div>
      </div>
      <div class="demo-item">
        <label>카운트다운</label>
        <div id="countdown" style="font-size: 20px; color: #1677ff;"></div>
      </div>
    </div>
    <div style="margin-top: 15px;">
      <button class="cui-btn cui-btn-sm" onclick="testFixbar()">Fixbar 표시</button>
    </div>
  </div>

  <script src="../catui.js"></script>
  <script>
    var transferInst;

    Catui.use(['$c', 'rate', 'slider', 'colorpicker', 'carousel', 'transfer', 'util', 'popup'], function(){
      var rate = Catui.rate;
      var slider = Catui.slider;
      var colorpicker = Catui.colorpicker;
      var carousel = Catui.carousel;
      var transfer = Catui.transfer;
      var util = Catui.util;
      var popup = Catui.popup;

      // Rate 별점
      rate.render({
        elem: '#rate1',
        value: 3,
        choose: function(value){ popup.msg('선택: ' + value + '점'); }
      });

      rate.render({
        elem: '#rate2',
        value: 3.5,
        half: true,
        choose: function(value){ popup.msg('선택: ' + value + '점'); }
      });

      rate.render({
        elem: '#rate3',
        value: 4,
        text: true,
        setText: function(value){
          var texts = ['매우 나쁨', '나쁨', '보통', '좋음', '매우 좋음'];
          return texts[value - 1] || '';
        }
      });

      rate.render({
        elem: '#rate4',
        value: 4.5,
        half: true,
        readonly: true
      });

      // Slider 슬라이더
      slider.render({
        elem: '#slider1',
        value: 30,
        change: function(value){ console.log('슬라이더1:', value); }
      });

      slider.render({
        elem: '#slider2',
        value: [20, 60],
        range: true,
        change: function(value){ console.log('슬라이더2:', value); }
      });

      slider.render({
        elem: '#slider3',
        value: 50,
        input: true
      });

      slider.render({
        elem: '#slider4',
        type: 'vertical',
        value: 40,
        height: 180
      });

      // Colorpicker 색상 선택기
      colorpicker.render({
        elem: '#colorpicker1',
        color: '#1677ff',
        done: function(color){
          document.getElementById('colorResult').textContent = color;
          document.getElementById('colorResult').style.color = color;
        }
      });

      colorpicker.render({
        elem: '#colorpicker2',
        color: '#5fb878',
        predefine: true,
        done: function(color){
          document.getElementById('colorResult').textContent = color;
          document.getElementById('colorResult').style.color = color;
        }
      });

      // Carousel 캐러셀
      carousel.render({
        elem: '#carousel1',
        width: '500px',
        height: '250px',
        autoplay: true,
        interval: 3000
      });

      // Transfer 이전 선택
      transferInst = transfer.render({
        elem: '#transfer1',
        data: [
          { value: 1, title: 'HTML' },
          { value: 2, title: 'CSS' },
          { value: 3, title: 'JavaScript' },
          { value: 4, title: 'TypeScript' },
          { value: 5, title: 'React' },
          { value: 6, title: 'Vue' },
          { value: 7, title: 'Angular' },
          { value: 8, title: 'Node.js' }
        ],
        value: [3, 5],
        title: ['기술 목록', '선택한 기술'],
        showSearch: true,
        onchange: function(obj){
          console.log('Transfer 변경:', obj.data);
        }
      });

      // Util 유틸리티
      // 시간 경과
      var times = [
        Date.now() - 30 * 1000,         // 30초 전
        Date.now() - 5 * 60 * 1000,     // 5분 전
        Date.now() - 3 * 60 * 60 * 1000, // 3시간 전
        Date.now() - 2 * 24 * 60 * 60 * 1000  // 2일 전
      ];
      var timeAgoHtml = times.map(function(t){
        return '<div>' + util.timeAgo(t) + '</div>';
      }).join('');
      document.getElementById('timeAgo').innerHTML = timeAgoHtml;

      // 숫자 포맷
      var numbers = [1234567, 9876.54, 100];
      var numberHtml = numbers.map(function(n){
        return '<div>' + n + ' → ' + util.comma(n) + '</div>';
      }).join('');
      document.getElementById('numberFormat').innerHTML = numberHtml;

      // 카운트다운
      var endTime = Date.now() + 60 * 1000;  // 1분 후
      util.countdown(endTime, function(d, h, m, s, status){
        if(status === 'end'){
          document.getElementById('countdown').textContent = '종료됨';
        } else {
          document.getElementById('countdown').textContent = 
            util.digit(m) + ':' + util.digit(s);
        }
      });
    });

    function getTransferData(){
      if(transferInst){
        var data = transferInst.getData();
        console.log('Transfer 데이터:', data);
        Catui.popup.msg('선택된 항목: ' + data.join(', '));
      }
    }

    function testFixbar(){
      Catui.util.fixbar({
        bar1: true,
        bar2: true,
        click: function(type){
          Catui.popup.msg('클릭: ' + type);
        }
      });
    }
  </script>
</body>
</html>
