/*!
 * Catui - Modern modular Front-End UI library
 * MIT Licensed
 */
!function(e,t){"use strict";var o=e.document,n={modules:{},status:{},timeout:10,maxRetry:50,debug:!1,event:{}},r={$c:"modules/cui",popup:"modules/popup",date:"modules/date",page:"modules/page",tpl:"modules/tpl",form:"modules/form",table:"modules/table",element:"modules/element",upload:"modules/upload",tree:"modules/tree",dropdown:"modules/dropdown",util:"modules/util",carousel:"modules/carousel",slider:"modules/slider",rate:"modules/rate",colorpicker:"modules/colorpicker",transfer:"modules/transfer",editor:"modules/editor",flow:"modules/flow",code:"modules/code",theme:"modules/theme",router:"modules/router",pagetabs:"modules/pagetabs"},i=function(t){n.debug&&e.console&&console.log&&console.log("[Catui] "+t)},u=function(t,o){o=o||"Catui",e.console&&console.error&&console.error(o+" error: "+t)},a=function(){this.v="1.0.0"};a.prototype.getPath=function(){for(var e=o.getElementsByTagName("script"),t="",n=0;n<e.length;n++){var r=e[n].src;if(r&&r.indexOf("catui")>-1){t=r.substring(0,r.lastIndexOf("/")+1);break}}return t||"./"},a.prototype.config=function(e){for(var t in e=e||{})n[t]=e[t];return this},a.prototype.define=function(e,t){var o=this,r=[],i="function"==typeof e?(t=e,["$c"]):e;return"function"!=typeof t?u("define callback is not a function"):(o.use(i,function(){(r=Array.prototype.slice.call(arguments)).unshift(function(e,t){a[e]=t,n.status[e]=!0}),t.apply(o,r)}),o)},a.prototype.use=function(t,i,a){var s=this,l=e.Catui,f=o.head||o.getElementsByTagName("head")[0],d="string"==typeof t?[t]:t,p=0;"function"!=typeof i&&(i=function(){});for(var c=0,m=function(){for(var t=!0,o=[],r=0;r<d.length;r++){var a=d[r];l[a]||e[a]||(!1===n.status[a]?o.push(a):t=!1)}if(t){o.length>0&&u("Failed to load modules: "+o.join(", "));var s;f=[];for(s=0;s<d.length;s++)f.push(l[d[s]]||e[d[s]]||null);i.apply(l,f)}else{if(++c>n.maxRetry){u("Module load timeout: "+d.filter(function(t){return!l[t]&&!e[t]}).join(", "));for(var f=[],p=0;p<d.length;p++)f.push(l[d[p]]||e[d[p]]||null);return void i.apply(l,f)}setTimeout(m,20)}},h=function(t){var i=r[t]||t;if(!function(t){return!!(l[t]||e[t]||n.status[t])&&(n.status[t]=!0,++p>=d.length&&m(),!0)}(t))if("loading"!==n.status[t]){n.status[t]="loading";var a=o.createElement("script");a.src=s.getPath()+i+".js",a.async=!0,a.onload=function(){setTimeout(function(){e[t]&&(l[t]=e[t]),n.status[t]=!0,++p>=d.length&&m()},10)},a.onerror=function(){u("Failed to load module: "+t),n.status[t]=!1,++p>=d.length&&m()},f.appendChild(a)}else{var c=function(){!0===n.status[t]?++p>=d.length&&m():"loading"===n.status[t]&&setTimeout(c,20)};c()}},g=0;g<d.length;g++)h(d[g]);return s};var s=function(e,t,o){return"string"!=typeof e||"function"!=typeof o?this:a.event(e,t,null,o)};a.prototype.onevent=s,a.onevent=s,a.prototype.event=a.event=function(e,t,o,r){var i=n.event[e]||{},u=(t||"").match(/\((.*)\)$/)||[],a=(t||"").replace(u[0]||"",""),s=u[1]||"";if("function"==typeof r)return i[a]=i[a]||{},i[a][s]=r,n.event[e]=i,this;var l=(i[a]||{})[s];return"function"==typeof l?l.call(this,o):void 0},a.prototype.off=function(e,t){var o=n.event[e]||{},r=(t||"").match(/\((.*)\)$/)||[],i=(t||"").replace(r[0]||"",""),u=r[1]||"";return o[i]&&delete o[i][u],this},a.prototype.each=function(e,o){var n;if("function"!=typeof o)return this;if(e.length!==t)for(n=0;n<e.length&&!1!==o.call(e[n],n,e[n]);n++);else for(n in e)if(e.hasOwnProperty(n)&&!1===o.call(e[n],n,e[n]))break;return this},a.prototype.data=function(o,n,r){if(o=o||"catui",r=r||localStorage,!e.JSON||!e.JSON.parse)return null;var i=JSON.parse(r.getItem(o)||"{}");if(null===n)return r.removeItem(o),!0;if(n===t)return i;if("string"==typeof n)return i[n];if("object"==typeof n){for(var u in n)n.hasOwnProperty(u)&&(null===n[u]?delete i[u]:i[u]=n[u]);return r.setItem(o,JSON.stringify(i)),i}return i},a.prototype.sessionData=function(e,t){return this.data(e,t,sessionStorage)},a.prototype.device=function(e){var t=navigator.userAgent.toLowerCase(),o={mobile:/android|iphone|ipad|ipod|mobile/i.test(t),ios:/iphone|ipad|ipod/i.test(t),android:/android/i.test(t),weixin:/micromessenger/i.test(t)};return e?o[e]:o},a.prototype.hint=function(){return{error:u,log:i}},a.prototype.link=function(e,t,n){var r=o.head||o.getElementsByTagName("head")[0],i=o.createElement("link");return"string"==typeof t&&(n=t),i.href=e,i.rel="stylesheet",i.id=n||"",r.appendChild(i),"function"==typeof t&&(i.onload=t),this};var l=new a;e.Catui=l,l.use("$c",function(){i("v"+l.v+" ready")})}(window);