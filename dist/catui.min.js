/*!
 * Catui - Modern modular Front-End UI library
 * MIT Licensed
 */
!function(e,t){"use strict";var o=e.document,n={modules:{},status:{},timeout:10,maxRetry:50,debug:!1,event:{}},r={$c:"modules/cui",popup:"modules/popup",date:"modules/date",page:"modules/page",tpl:"modules/tpl",form:"modules/form",table:"modules/table",element:"modules/element",upload:"modules/upload",tree:"modules/tree",dropdown:"modules/dropdown",util:"modules/util",carousel:"modules/carousel",slider:"modules/slider",rate:"modules/rate",colorpicker:"modules/colorpicker",transfer:"modules/transfer",editor:"modules/editor",flow:"modules/flow",code:"modules/code",theme:"modules/theme",router:"modules/router"},i=function(t){n.debug&&e.console&&console.log&&console.log("[Catui] "+t)},u=function(t,o){o=o||"Catui",e.console&&console.error&&console.error(o+" error: "+t)},s=function(){this.v="1.0.0"};s.prototype.getPath=function(){for(var e=o.getElementsByTagName("script"),t="",n=0;n<e.length;n++){var r=e[n].src;if(r&&r.indexOf("catui")>-1){t=r.substring(0,r.lastIndexOf("/")+1);break}}return t||"./"},s.prototype.config=function(e){for(var t in e=e||{})n[t]=e[t];return this},s.prototype.define=function(e,t){var o=this,r=[],i="function"==typeof e?(t=e,["$c"]):e;return"function"!=typeof t?u("define callback is not a function"):(o.use(i,function(){(r=Array.prototype.slice.call(arguments)).unshift(function(e,t){s[e]=t,n.status[e]=!0}),t.apply(o,r)}),o)},s.prototype.use=function(t,i,s){var a=this,l=e.Catui,f=o.head||o.getElementsByTagName("head")[0],d="string"==typeof t?[t]:t,c=0;"function"!=typeof i&&(i=function(){});for(var p=0,m=function(){for(var t=!0,o=[],r=0;r<d.length;r++){var s=d[r];l[s]||e[s]||(!1===n.status[s]?o.push(s):t=!1)}if(t){o.length>0&&u("Failed to load modules: "+o.join(", "));var a;f=[];for(a=0;a<d.length;a++)f.push(l[d[a]]||e[d[a]]||null);i.apply(l,f)}else{if(++p>n.maxRetry){u("Module load timeout: "+d.filter(function(t){return!l[t]&&!e[t]}).join(", "));for(var f=[],c=0;c<d.length;c++)f.push(l[d[c]]||e[d[c]]||null);return void i.apply(l,f)}setTimeout(m,20)}},h=function(t){var i=r[t]||t;if(!function(t){return!!(l[t]||e[t]||n.status[t])&&(n.status[t]=!0,++c>=d.length&&m(),!0)}(t))if("loading"!==n.status[t]){n.status[t]="loading";var s=o.createElement("script");s.src=a.getPath()+i+".js",s.async=!0,s.onload=function(){setTimeout(function(){e[t]&&(l[t]=e[t]),n.status[t]=!0,++c>=d.length&&m()},10)},s.onerror=function(){u("Failed to load module: "+t),n.status[t]=!1,++c>=d.length&&m()},f.appendChild(s)}else{var p=function(){!0===n.status[t]?++c>=d.length&&m():"loading"===n.status[t]&&setTimeout(p,20)};p()}},g=0;g<d.length;g++)h(d[g]);return a};var a=function(e,t,o){return"string"!=typeof e||"function"!=typeof o?this:s.event(e,t,null,o)};s.prototype.onevent=a,s.onevent=a,s.prototype.event=s.event=function(e,t,o,r){var i=n.event[e]||{},u=(t||"").match(/\((.*)\)$/)||[],s=(t||"").replace(u[0]||"",""),a=u[1]||"";if("function"==typeof r)return i[s]=i[s]||{},i[s][a]=r,n.event[e]=i,this;var l=(i[s]||{})[a];return"function"==typeof l?l.call(this,o):void 0},s.prototype.off=function(e,t){var o=n.event[e]||{},r=(t||"").match(/\((.*)\)$/)||[],i=(t||"").replace(r[0]||"",""),u=r[1]||"";return o[i]&&delete o[i][u],this},s.prototype.each=function(e,o){var n;if("function"!=typeof o)return this;if(e.length!==t)for(n=0;n<e.length&&!1!==o.call(e[n],n,e[n]);n++);else for(n in e)if(e.hasOwnProperty(n)&&!1===o.call(e[n],n,e[n]))break;return this},s.prototype.data=function(o,n,r){if(o=o||"catui",r=r||localStorage,!e.JSON||!e.JSON.parse)return null;var i=JSON.parse(r.getItem(o)||"{}");if(null===n)return r.removeItem(o),!0;if(n===t)return i;if("string"==typeof n)return i[n];if("object"==typeof n){for(var u in n)n.hasOwnProperty(u)&&(null===n[u]?delete i[u]:i[u]=n[u]);return r.setItem(o,JSON.stringify(i)),i}return i},s.prototype.sessionData=function(e,t){return this.data(e,t,sessionStorage)},s.prototype.device=function(e){var t=navigator.userAgent.toLowerCase(),o={mobile:/android|iphone|ipad|ipod|mobile/i.test(t),ios:/iphone|ipad|ipod/i.test(t),android:/android/i.test(t),weixin:/micromessenger/i.test(t)};return e?o[e]:o},s.prototype.hint=function(){return{error:u,log:i}},s.prototype.link=function(e,t,n){var r=o.head||o.getElementsByTagName("head")[0],i=o.createElement("link");return"string"==typeof t&&(n=t),i.href=e,i.rel="stylesheet",i.id=n||"",r.appendChild(i),"function"==typeof t&&(i.onload=t),this};var l=new s;e.Catui=l,l.use("$c",function(){i("v"+l.v+" ready")})}(window);