<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Carousel 캐러셀 테스트 - Catui</title>
  <link rel="stylesheet" href="/dist/catui.css">
  <style>
    body { padding: 20px; background: #f5f5f5; }
    
    .test-section { 
      padding: 20px; 
      margin-bottom: 20px; 
      background: #fff; 
      border-radius: 8px; 
    }
    .test-section h3 { 
      margin-top: 0; 
      border-bottom: 1px solid #eee; 
      padding-bottom: 10px; 
      margin-bottom: 20px;
    }
    .ws-space-16 { 
      margin: 16px 0; 
      border: 0; 
      border-top: 1px solid #eee; 
    }
    
    /* Layui 스타일 - 슬라이드 아이템 기본 스타일 */
    [carousel-item] > * {
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: #fff;
      font-size: 36px;
      font-weight: 300;
    }
    [carousel-item] > *:nth-child(2n) { background-color: #009688; }
    [carousel-item] > *:nth-child(2n+1) { background-color: #5FB878; }
    
    /* Fade 예제 높이 조정 */
    #carousel-fade [carousel-item] > * { font-size: 24px; }
    
    /* 이미지 슬라이드 */
    [carousel-item] > * > img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    /* 옵션 설정 패널 */
    .option-panel {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin-bottom: 20px;
      padding: 15px;
      background: #fafafa;
      border-radius: 4px;
    }
    .option-group {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .option-group label {
      font-weight: 500;
      color: #666;
      white-space: nowrap;
    }
    .option-group .cui-btn.active {
      background-color: #16b777;
      border-color: #16b777;
    }
    .option-group input.cui-input {
      width: 80px;
    }
    
    /* 상태 로그 */
    .status-log {
      margin-top: 15px;
      padding: 12px 15px;
      background: #f0f5ff;
      border-left: 3px solid #1677ff;
      border-radius: 4px;
      font-family: monospace;
    }
  </style>
</head>
<body>
  <h2>Carousel 캐러셀</h2>

  <!-- 기본 사용법 -->
  <div class="test-section">
    <h3>기본 사용법</h3>
    <div class="cui-carousel" id="carousel-basic">
      <div carousel-item>
        <div>조목 1</div>
        <div>조목 2</div>
        <div>조목 3</div>
        <div>조목 4</div>
        <div>조목 5</div>
      </div>
    </div>
    <hr class="ws-space-16">
    <div class="cui-carousel" id="carousel-fade">
      <div carousel-item>
        <div>조목 1</div>
        <div>조목 2</div>
      </div>
    </div>
  </div>

  <!-- 옵션 미리보기 -->
  <div class="test-section">
    <h3>옵션 미리보기</h3>
    <div class="option-panel">
      <div class="option-group">
        <label>크기:</label>
        <input type="text" id="opt-width" class="cui-input" value="600" placeholder="너비">
        <span>×</span>
        <input type="text" id="opt-height" class="cui-input" value="280" placeholder="높이">
      </div>
      <div class="option-group">
        <label>간격(ms):</label>
        <input type="text" id="opt-interval" class="cui-input" value="3000" placeholder="간격">
      </div>
    </div>
    <div class="option-panel">
      <div class="option-group">
        <label>애니메이션:</label>
        <button class="cui-btn cui-btn-sm active" data-key="anim" data-value="">좌우</button>
        <button class="cui-btn cui-btn-sm" data-key="anim" data-value="updown">상하</button>
        <button class="cui-btn cui-btn-sm" data-key="anim" data-value="fade">페이드</button>
        <button class="cui-btn cui-btn-sm" data-key="anim" data-value="zoom">줌</button>
        <button class="cui-btn cui-btn-sm" data-key="anim" data-value="slidefade">슬라이드페이드</button>
        <button class="cui-btn cui-btn-sm" data-key="anim" data-value="scale">스케일</button>
      </div>
      <div class="option-group">
        <label>화살표:</label>
        <button class="cui-btn cui-btn-sm active" data-key="arrow" data-value="hover">호버</button>
        <button class="cui-btn cui-btn-sm" data-key="arrow" data-value="always">항상</button>
        <button class="cui-btn cui-btn-sm" data-key="arrow" data-value="none">없음</button>
      </div>
      <div class="option-group">
        <label>인디케이터:</label>
        <button class="cui-btn cui-btn-sm active" data-key="indicator" data-value="inside">내부</button>
        <button class="cui-btn cui-btn-sm" data-key="indicator" data-value="outside">외부</button>
        <button class="cui-btn cui-btn-sm" data-key="indicator" data-value="none">없음</button>
      </div>
      <div class="option-group">
        <label>자동재생:</label>
        <button class="cui-btn cui-btn-sm active" data-key="autoplay" data-value="true">ON</button>
        <button class="cui-btn cui-btn-sm" data-key="autoplay" data-value="false">OFF</button>
      </div>
    </div>
    <div class="cui-carousel" id="carousel-options">
      <div carousel-item>
        <div>조목 1</div>
        <div>조목 2</div>
        <div>조목 3</div>
        <div>조목 4</div>
        <div>조목 5</div>
      </div>
    </div>
  </div>

  <!-- 이미지 슬라이드 -->
  <div class="test-section">
    <h3>이미지 슬라이드</h3>
    <div class="cui-carousel" id="carousel-images">
      <div carousel-item>
        <div><img src="https://picsum.photos/720/360?random=1" alt=""></div>
        <div><img src="https://picsum.photos/720/360?random=2" alt=""></div>
        <div><img src="https://picsum.photos/720/360?random=3" alt=""></div>
        <div><img src="https://picsum.photos/720/360?random=4" alt=""></div>
        <div><img src="https://picsum.photos/720/360?random=5" alt=""></div>
      </div>
    </div>
  </div>

  <!-- 컨텐츠 슬라이드 -->
  <div class="test-section">
    <h3>컨텐츠 슬라이드</h3>
    <div class="cui-carousel" id="carousel-content">
      <div carousel-item>
        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
          <div class="cui-carousel-content">
            <h2 class="cui-carousel-title">Catui Framework</h2>
            <p class="cui-carousel-desc">현대적인 웹 UI 프레임워크로 빠르고 쉽게 웹 애플리케이션을 구축하세요.</p>
            <div class="cui-carousel-btns">
              <a href="#" class="cui-carousel-btn cui-carousel-btn-primary">시작하기</a>
              <a href="#" class="cui-carousel-btn cui-carousel-btn-outline">문서 보기</a>
            </div>
          </div>
        </div>
        <div style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
          <div class="cui-carousel-content">
            <h2 class="cui-carousel-title">다양한 컴포넌트</h2>
            <p class="cui-carousel-desc">테이블, 폼, 트리, 팝업 등 다양한 UI 컴포넌트를 제공합니다.</p>
            <div class="cui-carousel-btns">
              <a href="#" class="cui-carousel-btn cui-carousel-btn-primary">컴포넌트 목록</a>
            </div>
          </div>
        </div>
        <div style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
          <div class="cui-carousel-content">
            <h2 class="cui-carousel-title">쉬운 커스터마이징</h2>
            <p class="cui-carousel-desc">CSS 변수와 모듈화된 구조로 손쉽게 테마를 변경할 수 있습니다.</p>
            <div class="cui-carousel-btns">
              <a href="#" class="cui-carousel-btn cui-carousel-btn-outline">테마 설정</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- 썸네일 캐러셀 -->
  <div class="test-section">
    <h3>썸네일 캐러셀</h3>
    
    <!-- 기본 썸네일 -->
    <h4 style="margin: 0 0 10px; font-size: 14px; color: #666;">기본 썸네일</h4>
    <div class="cui-carousel" id="carousel-thumb1">
      <div carousel-item>
        <div><img src="https://picsum.photos/800/400?random=10" alt=""></div>
        <div><img src="https://picsum.photos/800/400?random=11" alt=""></div>
        <div><img src="https://picsum.photos/800/400?random=12" alt=""></div>
        <div><img src="https://picsum.photos/800/400?random=13" alt=""></div>
      </div>
    </div>
    <div class="cui-carousel-thumbs" id="thumbs1">
      <div class="cui-carousel-thumb cui-this" data-index="0"><img src="https://picsum.photos/80/50?random=10" alt=""></div>
      <div class="cui-carousel-thumb" data-index="1"><img src="https://picsum.photos/80/50?random=11" alt=""></div>
      <div class="cui-carousel-thumb" data-index="2"><img src="https://picsum.photos/80/50?random=12" alt=""></div>
      <div class="cui-carousel-thumb" data-index="3"><img src="https://picsum.photos/80/50?random=13" alt=""></div>
    </div>

    <hr class="ws-space-16">

    <!-- 라지 썸네일 -->
    <h4 style="margin: 0 0 10px; font-size: 14px; color: #666;">라지 썸네일</h4>
    <div class="cui-carousel" id="carousel-thumb2">
      <div carousel-item>
        <div><img src="https://picsum.photos/800/400?random=20" alt=""></div>
        <div><img src="https://picsum.photos/800/400?random=21" alt=""></div>
        <div><img src="https://picsum.photos/800/400?random=22" alt=""></div>
      </div>
    </div>
    <div class="cui-carousel-thumbs" id="thumbs2">
      <div class="cui-carousel-thumb cui-carousel-thumb-lg cui-this" data-index="0"><img src="https://picsum.photos/120/75?random=20" alt=""></div>
      <div class="cui-carousel-thumb cui-carousel-thumb-lg" data-index="1"><img src="https://picsum.photos/120/75?random=21" alt=""></div>
      <div class="cui-carousel-thumb cui-carousel-thumb-lg" data-index="2"><img src="https://picsum.photos/120/75?random=22" alt=""></div>
    </div>

    <hr class="ws-space-16">

    <!-- 숫자 썸네일 -->
    <h4 style="margin: 0 0 10px; font-size: 14px; color: #666;">숫자 썸네일</h4>
    <div class="cui-carousel" id="carousel-thumb3">
      <div carousel-item>
        <div><img src="https://picsum.photos/800/400?random=30" alt=""></div>
        <div><img src="https://picsum.photos/800/400?random=31" alt=""></div>
        <div><img src="https://picsum.photos/800/400?random=32" alt=""></div>
        <div><img src="https://picsum.photos/800/400?random=33" alt=""></div>
        <div><img src="https://picsum.photos/800/400?random=34" alt=""></div>
      </div>
    </div>
    <div class="cui-carousel-thumbs" id="thumbs3">
      <div class="cui-carousel-thumb cui-carousel-thumb-num cui-this" data-index="0">1</div>
      <div class="cui-carousel-thumb cui-carousel-thumb-num" data-index="1">2</div>
      <div class="cui-carousel-thumb cui-carousel-thumb-num" data-index="2">3</div>
      <div class="cui-carousel-thumb cui-carousel-thumb-num" data-index="3">4</div>
      <div class="cui-carousel-thumb cui-carousel-thumb-num" data-index="4">5</div>
    </div>
  </div>

  <!-- 이벤트 & API -->
  <div class="test-section">
    <h3>이벤트 & API</h3>
    <div class="cui-carousel" id="carousel-api">
      <div carousel-item>
        <div>이벤트 1</div>
        <div>이벤트 2</div>
        <div>이벤트 3</div>
      </div>
    </div>
    <div style="margin-top: 15px; display: flex; gap: 10px; flex-wrap: wrap;">
      <button class="cui-btn cui-btn-sm" onclick="carouselApiInst && carouselApiInst.prev()">
        <i class="cui-icon">chevron_left</i> 이전
      </button>
      <button class="cui-btn cui-btn-sm" onclick="carouselApiInst && carouselApiInst.next()">
        다음 <i class="cui-icon">chevron_right</i>
      </button>
      <button class="cui-btn cui-btn-sm cui-btn-primary" onclick="carouselApiInst && carouselApiInst.goto(0)">첫 번째로</button>
      <button class="cui-btn cui-btn-sm cui-btn-primary" onclick="carouselApiInst && carouselApiInst.goto(2)">세 번째로</button>
      <button class="cui-btn cui-btn-sm cui-btn-warm" onclick="carouselApiInst && carouselApiInst.pause()">
        <i class="cui-icon">pause</i> 일시정지
      </button>
      <button class="cui-btn cui-btn-sm cui-btn-normal" onclick="carouselApiInst && carouselApiInst.play()">
        <i class="cui-icon">play_arrow</i> 재생
      </button>
    </div>
    <div id="carouselLog" class="status-log">슬라이드 변경 시 로그가 표시됩니다.</div>
  </div>

  <script src="/dist/catui.js"></script>
  <script>
    var carouselOptionsInst, carouselApiInst;

    Catui.use(['$c', 'carousel'], function(){
      var carousel = Catui.carousel;
      var $c = Catui.$c;

      // 기본 캐러셀
      carousel.render({
        elem: '#carousel-basic',
        width: 'auto'
      });

      // Fade 애니메이션
      carousel.render({
        elem: '#carousel-fade',
        width: 'auto',
        height: '120px',
        anim: 'fade',
        interval: 1800
      });

      // 옵션 미리보기
      carouselOptionsInst = carousel.render({
        elem: '#carousel-options',
        id: 'options-demo',
        width: '600px',
        height: '280px'
      });

      // 옵션 버튼 이벤트
      $c('.option-panel .cui-btn').on('click', function(){
        var btn = $c(this);
        var key = btn.attr('data-key');
        var value = btn.attr('data-value');
        
        // 같은 그룹 버튼 active 해제
        btn.parent().find('.cui-btn').removeClass('active');
        btn.addClass('active');
        
        // 값 변환
        if(value === 'true') value = true;
        if(value === 'false') value = false;
        
        // 옵션 객체 생성 및 리로드
        var opts = {};
        opts[key] = value;
        carouselOptionsInst.reload(opts);
      });

      // 크기/간격 입력 이벤트
      $c('#opt-width, #opt-height, #opt-interval').on('input', function(){
        var width = $c('#opt-width').val() + 'px';
        var height = $c('#opt-height').val() + 'px';
        var interval = parseInt($c('#opt-interval').val()) || 3000;
        
        carouselOptionsInst.reload({
          width: width,
          height: height,
          interval: interval
        });
      });

      // 이미지 슬라이드
      carousel.render({
        elem: '#carousel-images',
        width: '720px',
        height: '360px',
        interval: 3000
      });

      // 컨텐츠 슬라이드
      carousel.render({
        elem: '#carousel-content',
        width: '100%',
        height: '320px',
        anim: 'fade',
        interval: 5000
      });

      // 썸네일 캐러셀 헬퍼 함수
      function setupThumbCarousel(carouselId, thumbsId) {
        var inst = carousel.render({
          elem: '#' + carouselId,
          id: carouselId,
          width: '100%',
          height: '300px',
          indicator: 'none',
          autoplay: false
        });

        // 썸네일 클릭 이벤트
        $c('#' + thumbsId + ' .cui-carousel-thumb').on('click', function(){
          var idx = parseInt(this.getAttribute('data-index'));
          inst.goto(idx);
        });

        // 캐러셀 변경 시 썸네일 동기화
        carousel.on('change(' + carouselId + ')', function(obj){
          $c('#' + thumbsId + ' .cui-carousel-thumb').removeClass('cui-this');
          $c('#' + thumbsId + ' .cui-carousel-thumb[data-index="' + obj.index + '"]').addClass('cui-this');
        });
      }

      setupThumbCarousel('carousel-thumb1', 'thumbs1');
      setupThumbCarousel('carousel-thumb2', 'thumbs2');
      setupThumbCarousel('carousel-thumb3', 'thumbs3');

      // 이벤트 & API
      carouselApiInst = carousel.render({
        elem: '#carousel-api',
        id: 'api-demo',
        width: '500px',
        height: '250px'
      });

      // 이벤트 등록
      carousel.on('change(api-demo)', function(obj){
        document.getElementById('carouselLog').innerHTML = 
          '<b>change 이벤트:</b> 현재: ' + (obj.index + 1) + 
          ' / 이전: ' + (obj.prevIndex + 1) + 
          ' / 전체: ' + obj.length;
      });
    });
  </script>
</body>
</html>
